# Landsat Quicklook Skip List Tools

The purpose of these tools is to generate lists of Landsat scene IDs that are "cloudy" and "clear".  To do this, the Landsat quicklook images are first downloaded by path/row and year using the "metadata_xml_image_download.py" script.  After downloading the quicklooks, the "cloudy" images need to manually sorted.  Finally, the scene IDs files are generated by running the "make_quicklook_lists.py" script.

## Landsat Bulk Metadata XML

The Landsat bulk metadata XML can be downloaded from: http://landsat.usgs.gov/landsat-bulk-metadata-service

To download the full XML file for Landsat path/rows 39/32, 39/33, 40/32, and 40/33, you would enter the following options:
+ WRS Path: 39 to 40
+ WRS Row: 32 to 33
+ Dataset: "Pre-Collection: Landsat 4-8 Combined" (eventually the code will be modified to support the Collection 1 dataset)
+ Starting: 07/01/1982
+ Ending: 12/31/2016 (or current date)
+ Select Scene Cloud Cover: "All"
+ Select Output Format: "Custom XML"
+ Save as "metadata.xml" in the quicklooks folder

## Quicklook Download

The quicklook download script can be run from the command prompt or by double clicking on the script.  The script will download the quicklooks into separate folders by path/row and year.

From the command prompt, change directory into the quicklooks folder, then enter the following command:
```
python metadata_xml_image_download.py -x metadata.xml
```

If you double click the download script, it should prompt open a GUI prompting you to select an XML file.

The download script can be modified to limit the path, rows, or path/rows that are processed if the metadata XML file includes unwanted path/rows.

## Cloudy Scene Sorting

After downloading the quicklook images, they need to be manually sorted to identify the "cloudy" images.  Within each path/row/year folder, manually move each "cloudy" (or image with bad data, snow, etc.) to the "cloudy" folder.

## Clear/Cloudy Scene Lists

The clear and cloudy scene ID lists can be generated either from the command prompt or by double clicking the "make_quicklook_lists.py" script.

From the command prompt, enter the following command:
```
python make_quicklook_lists.py
```

## Command Line Arguments

Both of the python scripts have additional arguments that can be set from the command line.  To view these options, run the script with the "-h" argument.

```
python metadata_xml_image_download.py -h

usage: metadata_xml_image_download.py [-h] [-x XML] [--output OUTPUT]
                                      [--landsat LANDSAT]
                                      [--skiplist SKIPLIST] [-o] [--debug]

Download Landsat Quicklook images Beware that many values are hardcoded!

optional arguments:
  -h, --help           show this help message and exit
  -x XML, --xml XML    Landsat bulk metadata XML (default: None)
  --output OUTPUT      Output folder (default: D:\Projects\ee-
                       tools\quicklooks)
  --landsat LANDSAT    Landsat tar.gz folder (default: None)
  --skiplist SKIPLIST  Skips files in skip list (default: None)
  -o, --overwrite      Include existing scenes in scene download list
                       (default: False)
  --debug              Debug level logging (default: 20)

```
